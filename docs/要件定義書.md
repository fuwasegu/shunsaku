# 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
**Golf Swing Analyzer（ゴルフスイング解析アプリ）**

### 1.2 プロジェクトの目的
スマートフォンのジャイロセンサーを活用し、ユーザーのゴルフスイングの特徴を解析して、最適なクラブと棒の組み合わせを提案するWebアプリケーションの開発。

### 1.3 対象ユーザー
- ゴルフ初心者〜中級者
- スマートフォンを持つゴルファー
- 自分のスイングを改善したいユーザー

### 1.4 プロジェクト制約
- **実装期間**: プリセールスデモ用（30分での実装完了必須）
- **配信環境**: Vercel（自動デプロイ）
- **デバイス**: スマートフォン対応必須

---

## 2. 機能要件

### 2.1 コア機能

#### 2.1.1 スイング検出・解析機能
- **機能概要**: スマートフォンのジャイロセンサーを使用してスイング動作を検出
- **詳細**:
  - デバイスのジャイロスコープ、加速度センサーデータを取得
  - スイング開始〜終了までの動作を自動検出
  - センサーデータをリアルタイムで収集・解析

#### 2.1.2 AI解析・提案機能
- **機能概要**: Gemini AIを使用してスイングの特徴を解析し、クラブ・棒の組み合わせを提案
- **詳細**:
  - スイングデータをGemini APIに送信
  - ユーザーの「スイングのクセ」を分析
  - 最適なクラブ・棒の組み合わせを3種類提案
  - 分析結果の詳細な解説を生成

#### 2.1.3 結果表示機能
- **機能概要**: 解析結果をユーザーフレンドリーな形式で表示
- **詳細**:
  - スイング特徴の解説文
  - 推奨組み合わせ3つをカード形式で表示
  - 各組み合わせの理由と期待効果を表示

### 2.2 UI/UX機能

#### 2.2.1 スイング測定画面
- スイング開始ボタン
- 測定中のプログレスインジケーター
- 「スマホを振ってください」の指示表示

#### 2.2.2 結果表示画面
- スイング解析結果の表示
- 3つの推奨組み合わせカード
- 再測定ボタン

#### 2.2.3 レスポンシブデザイン
- モバイルファーストデザイン
- 横持ち・縦持ち両対応

---

## 3. 非機能要件

### 3.1 パフォーマンス要件
- **レスポンス時間**: スイング解析結果表示まで3秒以内
- **ページ読み込み**: 初回読み込み2秒以内
- **リアルタイム性**: センサーデータ取得は100ms間隔

### 3.2 可用性要件
- **稼働率**: 99%以上（Vercelプラットフォーム依存）
- **デバイス対応**: iOS Safari 14+、Android Chrome 90+

### 3.3 セキュリティ要件
- **データ保護**: センサーデータの暗号化送信
- **プライバシー**: 個人データの非保存
- **API保護**: Gemini APIキーの環境変数管理

### 3.4 アクセシビリティ要件
- **WCAG 2.1 AA準拠**
- **音声読み上げ対応**
- **キーボードナビゲーション対応**

---

## 4. 技術要件

### 4.1 フロントエンド技術スタック
- **フレームワーク**: SvelteKit 2.22.0+
- **言語**: TypeScript 5.0+
- **ビルドツール**: Vite 7.0+
- **スタイル**: PostCSS + Material Design 3準拠

### 4.2 センサー技術
- **Web API**: Device Motion API, Device Orientation API
- **ブラウザ権限**: motion sensors permission

### 4.3 AI技術
- **AI Provider**: Google Gemini 2.5 Flash[[memory:3574556]]
- **API統合**: Gemini REST API
- **データ形式**: JSON

### 4.4 デプロイ・ホスティング
- **プラットフォーム**: Vercel
- **デプロイ方式**: Git push時自動デプロイ
- **ドメイン**: shunsaku-2025.fuwasegu.com

---

## 5. システム構成

### 5.1 アーキテクチャ図
```
[スマートフォン] 
    ↓ (ジャイロセンサー)
[SvelteKit Webアプリ]
    ↓ (HTTP/HTTPS)
[Gemini API]
    ↓ (解析結果)
[結果表示画面]
```

### 5.2 データフロー
1. ユーザーがスイング開始ボタンを押下
2. デバイスセンサー権限を要求・取得
3. ジャイロセンサー・加速度センサーからデータ収集
4. スイング終了を自動検出
5. センサーデータをGemini APIに送信
6. AI解析結果を受信
7. 結果をユーザーフレンドリーな形式で表示

---

## 6. 画面設計要件

### 6.1 メイン画面
- **ヘッダー**: アプリタイトル「Golf Swing Analyzer」
- **メインコンテンツ**: スイング測定ボタン（大きなCTAボタン）
- **説明文**: 「スマホを振ってスイングを解析」

### 6.2 測定中画面
- **プログレスインジケーター**: 測定進行状況
- **指示テキスト**: 「スマホを持ってゴルフスイングをしてください」
- **キャンセルボタン**: 測定中止機能

### 6.3 結果画面
- **解析結果セクション**: 
  - スイング特徴の解説
  - 「あなたのクセは...」で始まる分析文
- **推奨組み合わせセクション**:
  - 3つのカード形式表示
  - 各カードにクラブ・棒の組み合わせと理由
- **再測定ボタン**: 再度測定を行う

---

## 7. 品質要件

### 7.1 テストケース
- **センサー動作確認**: デバイス回転・振り動作の正確な検出
- **API連携確認**: Gemini APIからの正常レスポンス
- **エラーハンドリング**: ネットワークエラー、権限拒否時の対応
- **デバイス互換性**: iOS/Android各ブラウザでの動作確認

### 7.2 パフォーマンス指標
- **Lighthouse Score**: 90点以上
- **First Contentful Paint**: 1.5秒以内
- **Largest Contentful Paint**: 2.5秒以内

---

## 8. 制約事項・前提条件

### 8.1 技術的制約
- **ブラウザ依存**: Device Motion API対応ブラウザ必須
- **HTTPS必須**: センサーAPIはHTTPS環境でのみ動作
- **API制限**: Gemini APIの利用制限・コスト考慮

### 8.2 時間的制約
- **デモ対応**: 30分での実装完了必須
- **最小機能**: MVP（Minimum Viable Product）として実装

### 8.3 デバイス制約
- **センサー搭載**: ジャイロスコープ・加速度センサー搭載デバイス必須
- **スマートフォン**: タブレット・PCでは精度低下の可能性

---

## 9. リスク管理

### 9.1 技術リスク
- **センサー精度**: デバイスによるセンサー精度のばらつき
- **ブラウザ互換性**: 古いブラウザでのセンサーAPI未対応

### 9.2 外部依存リスク
- **Gemini API**: サービス停止・レート制限
- **Vercel**: プラットフォーム障害

### 9.3 対策
- **フォールバック**: API障害時のモックデータ表示
- **エラーハンドリング**: 分かりやすいエラーメッセージ表示
- **プログレッシブ強化**: 基本機能から段階的な機能追加

---

## 10. 成功指標（KPI）

### 10.1 技術指標
- **実装完了**: 30分以内での動作デモ完成
- **動作安定性**: 主要ブラウザでの正常動作
- **レスポンス性能**: 3秒以内での結果表示

### 10.2 UX指標
- **利用しやすさ**: 直感的なUI/UX実現
- **結果の納得性**: AI解析結果の妥当性
- **再利用意向**: デモを見た顧客の再利用意向

---

## 11. 次期開発要件（将来拡張）

### 11.1 機能拡張
- **スイング履歴**: 過去の測定結果保存・比較
- **詳細解析**: より詳細なスイング分析項目
- **ソーシャル機能**: 結果のシェア機能

### 11.2 技術改善
- **機械学習**: カスタムMLモデルによる解析精度向上
- **リアルタイム**: WebSocketによるリアルタイム解析
- **PWA対応**: オフライン機能・アプリライク体験
